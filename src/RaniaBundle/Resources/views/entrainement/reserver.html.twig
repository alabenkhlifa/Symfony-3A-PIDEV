{% extends '@Rania/template/layout.html.twig' %}
{% block title %}Reserver{% endblock title %}
{% block user %}{% if user is not null %}{{ user.nom }} {{ user.prenom }}{% else %}to Karhabty! Place <a href="{{ path('fos_user_security_login') }}" class="login">Login</a> or <a href="{{ path('fos_user_registration_register') }}" class="register">Register</a>{% endif %}{% endblock %}
{% block style %}
<style type="text/css">
    .steps-form-2 {
        display: table;
        width: 100%;
        position: relative; }
    .steps-form-2 .steps-row-2 {
        display: table-row; }
    .steps-form-2 .steps-row-2:before {
        top: 14px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 100%;
        height: 2px;
        background-color: #7283a7; }
    .steps-form-2 .steps-row-2 .steps-step-2 {
        display: table-cell;
        text-align: center;
        position: relative; }
    .steps-form-2 .steps-row-2 .steps-step-2 p {
        margin-top: 0.5rem; }
    .steps-form-2 .steps-row-2 .steps-step-2 button[disabled] {
        opacity: 1 !important;
        filter: alpha(opacity=100) !important; }
    .steps-form-2 .steps-row-2 .steps-step-2 .btn-circle-2 {
        width: 70px;
        height: 70px;
        border: 2px solid #59698D;
        background-color: white !important;
        color: #59698D !important;
        border-radius: 50%;
        padding: 22px 18px 15px 18px;
        margin-top: -22px; }
    .steps-form-2 .steps-row-2 .steps-step-2 .btn-circle-2:hover {
        border: 2px solid #4285F4;
        color: #4285F4 !important;
        background-color: white !important; }
    .steps-form-2 .steps-row-2 .steps-step-2 .btn-circle-2 .fa {
        font-size: 1.7rem; }
</style>
{% endblock style %}
{% block body %}
    <!-- START | Breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <div class="flex-box">
                <h4>Reserver Entrainement</h4>
                <ul class="list-inline">
                    <li><a href="{{ path('rania_homepage') }}">Home</a></li>
                    <li class="current-page">Entrainement</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- END | Breadcrumb -->
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h2 class="text-center font-bold pt-4 pb-5 mb-5"><strong>Reserver une heure d'entrainement</strong></h2>
            <br><br>
            <!-- Stepper -->
            <div class="steps-form-2">
                <div class="steps-row-2 setup-panel-2 d-flex justify-content-between">
                    <div class="steps-step-2">
                        <a href="#step-1" type="button" class="btn btn-amber btn-circle-2 waves-effect ml-0" data-toggle="tooltip" data-placement="top" title="Basic Information"><i class="fa fa-car" aria-hidden="true"></i></a>
                    </div>
                    <div class="steps-step-2">
                        <a href="#step-2" type="button" class="btn btn-blue-grey btn-circle-2 waves-effect" data-toggle="tooltip" data-placement="top" title="Personal Data"><i class="fa fa-user" aria-hidden="true"></i></a>
                    </div>
                    <div class="steps-step-2">
                        <a href="#step-3" type="button" class="btn btn-blue-grey btn-circle-2 waves-effect" data-toggle="tooltip" data-placement="top" title="Terms and Conditions"><i class="fa fa-calendar" aria-hidden="true"></i></a>
                    </div>
                    <div class="steps-step-2">
                        <a href="#step-4" type="button" class="btn btn-blue-grey btn-circle-2 waves-effect mr-0" data-toggle="tooltip" data-placement="top" title="Finish"><i class="fa fa-check" aria-hidden="true"></i></a>
                    </div>
                </div>
            </div>

            <!-- First Step -->
            <form role="form" action="{{ path('rania_entrainement_reserver') }}" method="post">
                <div class="row setup-content-2" id="step-1">
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">Selectionner une voiture</label>
                        <select class="form-control" id="exampleFormControlSelect1" name="voiture">
                            {% for voiture in voitures %}
                            <option value="{{ voiture.id }}">{{ voiture.marque }} {{ voiture.modele }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button class="btn btn-success nextBtn-2 float-right" type="button">Suivant</button>
                    <br><br>
                </div>

                <!-- Second Step -->
                <div class="row setup-content-2" id="step-2">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="exampleFormControlSelect1">Selectionner Moniteur</label>
                            <select class="form-control" id="exampleFormControlSelect1" name="moniteur">
                                {% for moniteur in moniteurs %}
                                    <option value="{{ moniteur.id }}">{{ moniteur.nom }} {{ moniteur.prenom }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <button class="btn btn-primary prevBtn-2 float-left" type="button">Précédent</button>
                        <button class="btn btn-success nextBtn-2 float-right" type="button">Suivant</button>
                        <br><br>
                    </div>
                </div>

                <!-- Third Step -->
                <div class="row setup-content-2" id="step-3">
                    <div class="col-md-12">
                        <h3 class="font-weight-bold pl-0 my-4"><strong>Date d'entrainement (session dure 1 heure)</strong></h3>
                        <br>
                        <div class="form-check">
                            <input type="datetime-local" id="dateentrainement" name="dateentrainement" class="form-control">
                            <br>
                        </div>
                        <button class="btn btn-primary prevBtn-2 float-left" type="button">Précédent</button>
                        <button class="btn btn-success nextBtn-2 float-right" type="button">Suivant</button>
                        <br><br>
                    </div>
                </div>

                <!-- Fourth Step -->
                <div class="row setup-content-2" id="step-4">
                    <div class="col-md-12">
                        <h3 class="font-weight-bold pl-0 my-4"><strong>Terminé</strong></h3>
                        <h2 class="text-center font-weight-bold my-4">Cliquez sur Terminer pour reserver!</h2>
                        <button class="btn btn-primary prevBtn-2 float-left" type="button">Précédent</button>
                        <button class="btn btn-success float-right" type="submit">Terminer</button>
                        <br><br>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock body %}
{% block script %}
<script type="application/javascript">
    // Tooltips Initialization
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });

    // Steppers
    $(document).ready(function () {
        var navListItems = $('div.setup-panel-2 div a'),
            allWells = $('.setup-content-2'),
            allNextBtn = $('.nextBtn-2'),
            allPrevBtn = $('.prevBtn-2');

        allWells.hide();

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                $item = $(this);

            if (!$item.hasClass('disabled')) {
                navListItems.removeClass('btn-amber').addClass('btn-blue-grey');
                $item.addClass('btn-amber');
                allWells.hide();
                $target.show();
                $target.find('input:eq(0)').focus();
            }
        });

        allPrevBtn.click(function(){
            var curStep = $(this).closest(".setup-content-2"),
                curStepBtn = curStep.attr("id"),
                prevStepSteps = $('div.setup-panel-2 div a[href="#' + curStepBtn + '"]').parent().prev().children("a");
            prevStepSteps.removeAttr('disabled').trigger('click');
        });

        allNextBtn.click(function(){
            var curStep = $(this).closest(".setup-content-2"),
                curStepBtn = curStep.attr("id"),
                nextStepSteps = $('div.setup-panel-2 div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                curInputs = curStep.find("input[type='text'],input[type='url']"),
                isValid = true;

            $(".form-group").removeClass("has-error");
            for(var i=0; i< curInputs.length; i++){
                if (!curInputs[i].validity.valid){
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-error");
                }
            }

            if (isValid)
                nextStepSteps.removeAttr('disabled').trigger('click');
        });

        $('div.setup-panel-2 div a.btn-amber').trigger('click');
    });
</script>
{% endblock %}
